/*Inserten Competenties*/
use InterviewDB;
DROP PROCEDURE IF EXISTS CompetentieInsert;
DELIMITER //
CREATE PROCEDURE `CompetentieInsert`
(
	OUT pId INT ,
	IN pName NVARCHAR (200)
)
BEGIN
INSERT INTO `Competentie`
	(
		`Competentie`.`Naam`
	)
	VALUES
	(
		pName
  );
	SELECT LAST_INSERT_ID() INTO pId;
END //
DELIMITER ;

/*Inserten Vragen*/
use InterviewDB;
DROP PROCEDURE IF EXISTS VraagInsert;
DELIMITER //
CREATE PROCEDURE `VraagInsert`
(
	OUT pId INT ,
	IN pName TEXT,
	IN pCompId INT
)
BEGIN
INSERT INTO `Vraag`
	(
		`Vraag`.`Vraag`,
		`Vraag`.`CompetentieId`
	)
	VALUES
	(
		pName,
		pCompId
  );
	SELECT LAST_INSERT_ID() INTO pId;
END //
DELIMITER ;

/*Inserten Functies*/
use InterviewDB;
DROP PROCEDURE IF EXISTS FunctieInsert;
DELIMITER //
CREATE PROCEDURE `FunctieInsert`
  (
    OUT pId INT ,
IN pName NVARCHAR (200)
)
BEGIN
INSERT INTO `Functie`
(
`Functie`.`Naam`
)
VALUES
(
pName
);
SELECT LAST_INSERT_ID() INTO pId;
END //
DELIMITER ;

/*Alle competenties selecteren */
USE InterviewDB;
DROP PROCEDURE IF EXISTS CompetentiesSelectAll;
DELIMITER //
CREATE PROCEDURE `CompetentiesSelectAll`
  (
  )
  BEGIN
    SELECT Competentie.Naam, Competentie.Id FROM `Competentie`;
  END //
DELIMITER ;

/*Specifieke competentie selecteren */
USE InterviewDB;
DROP PROCEDURE IF EXISTS CompetentiesSelectOne;
DELIMITER //
CREATE PROCEDURE `CompetentiesSelectOne`
  (
  pId INT
  )
  BEGIN
    SELECT Competentie.Naam, Competentie.Id FROM `Competentie`
  WHERE `Competentie`.`Id` = pId;
  END //
DELIMITER ;

/*Vragen van specifieke competentie selecteren */
USE InterviewDB;
DROP PROCEDURE IF EXISTS CompetentiesSelectQuestions;
DELIMITER //
CREATE PROCEDURE `CompetentiesSelectQuestions`
  (
    IN pCompId INT
  )
  BEGIN
    SELECT Vraag.Vraag, Competentie.Naam FROM `Vraag`
      INNER JOIN Competentie ON CompetentieId = Competentie.Id
    WHERE `Vraag`.`CompetentieId` = pCompId;
  END //
DELIMITER ;